<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Teodoro José Martínez Arán">

<title>Análisis cluster no jerárquico de los indicadores de salud relacionados con el consumo de alcohol del año 2021 en los estados de US - Resultados - Análisis cluster</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../notebooks/07_discusion.html" rel="next">
<link href="../notebooks/05f_analysis.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../notebooks/06_resultados.html">Resultados - Análisis cluster</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Análisis cluster no jerárquico de los indicadores de salud relacionados con el consumo de alcohol del año 2021 en los estados de US</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trabajo fin de Máster</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/01_resumen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/02_agradecimientos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Agradecimientos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/03_indice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Índice de contenido</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/04_Introduccion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Material y Métodos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05_metodologia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visión general de la metología utilizada en el análisis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05a_config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 00 - Configuración del equipo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05b_ingesta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 01 - Ingesta</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05c_limpieza.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 02 - Limpieza</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05d_eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 03 - Análisis exploratorio de datos <em>(EDA)</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05e_transformacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 04 - Transformación</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/05f_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subproceso 05f - Análisis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/06_resultados.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Resultados - Análisis cluster</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/07_discusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discusión</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../notebooks/08_conclusiones.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusiones</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referencias</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#descripción-del-subproceso" id="toc-descripción-del-subproceso" class="nav-link active" data-scroll-target="#descripción-del-subproceso">Descripción del subproceso</a></li>
  <li><a href="#acciones-del-subproceso" id="toc-acciones-del-subproceso" class="nav-link" data-scroll-target="#acciones-del-subproceso">Acciones del subproceso</a>
  <ul>
  <li><a href="#fa---selección-de-los-datos-adecuados-para-el-análisis-cluster" id="toc-fa---selección-de-los-datos-adecuados-para-el-análisis-cluster" class="nav-link" data-scroll-target="#fa---selección-de-los-datos-adecuados-para-el-análisis-cluster">05fa - Selección de los datos adecuados para el análisis cluster</a></li>
  <li><a href="#fb---estandarización-de-valores-numéricos" id="toc-fb---estandarización-de-valores-numéricos" class="nav-link" data-scroll-target="#fb---estandarización-de-valores-numéricos">05fb - Estandarización de valores numéricos</a></li>
  <li><a href="#fc---cálculo-de-la-distancia-entre-observaciones" id="toc-fc---cálculo-de-la-distancia-entre-observaciones" class="nav-link" data-scroll-target="#fc---cálculo-de-la-distancia-entre-observaciones">05fc - Cálculo de la distancia entre observaciones</a>
  <ul class="collapse">
  <li><a href="#visualización-de-la-relación-entre-las-variables-estandarizadas" id="toc-visualización-de-la-relación-entre-las-variables-estandarizadas" class="nav-link" data-scroll-target="#visualización-de-la-relación-entre-las-variables-estandarizadas">Visualización de la relación entre las variables estandarizadas</a></li>
  </ul></li>
  <li><a href="#fd---análisis-de-tendencia-de-agrupación" id="toc-fd---análisis-de-tendencia-de-agrupación" class="nav-link" data-scroll-target="#fd---análisis-de-tendencia-de-agrupación">05fd - Análisis de tendencia de agrupación</a>
  <ul class="collapse">
  <li><a href="#evaluación-visual-de-tendencia-vat" id="toc-evaluación-visual-de-tendencia-vat" class="nav-link" data-scroll-target="#evaluación-visual-de-tendencia-vat">Evaluación visual de tendencia (VAT)</a></li>
  <li><a href="#estadística-de-hopkins" id="toc-estadística-de-hopkins" class="nav-link" data-scroll-target="#estadística-de-hopkins">Estadística de Hopkins</a></li>
  </ul></li>
  <li><a href="#fe---elección-del-método-y-la-vinculación-de-grupos" id="toc-fe---elección-del-método-y-la-vinculación-de-grupos" class="nav-link" data-scroll-target="#fe---elección-del-método-y-la-vinculación-de-grupos">05fe - Elección del método y la vinculación de grupos</a></li>
  <li><a href="#ff---elección-del-número-de-grupos-finales-de-forma-arbitraria-basados-en-ciertos-estadísticos-de-agrupación." id="toc-ff---elección-del-número-de-grupos-finales-de-forma-arbitraria-basados-en-ciertos-estadísticos-de-agrupación." class="nav-link" data-scroll-target="#ff---elección-del-número-de-grupos-finales-de-forma-arbitraria-basados-en-ciertos-estadísticos-de-agrupación.">05ff - Elección del número de grupos finales de forma arbitraria basados en ciertos estadísticos de agrupación.</a>
  <ul class="collapse">
  <li><a href="#según-criterios-de-estabilidad" id="toc-según-criterios-de-estabilidad" class="nav-link" data-scroll-target="#según-criterios-de-estabilidad">Según criterios de estabilidad</a></li>
  </ul></li>
  <li><a href="#fg---representación-e-interpretación-de-los-resultados." id="toc-fg---representación-e-interpretación-de-los-resultados." class="nav-link" data-scroll-target="#fg---representación-e-interpretación-de-los-resultados.">05fg - Representación e interpretación de los resultados.</a></li>
  <li><a href="#fh---evaluación-de-la-importancia-de-las-variables" id="toc-fh---evaluación-de-la-importancia-de-las-variables" class="nav-link" data-scroll-target="#fh---evaluación-de-la-importancia-de-las-variables">05fh - Evaluación de la importancia de las variables</a></li>
  <li><a href="#fi---visualización-de-las-agrupaciones-cluster" id="toc-fi---visualización-de-las-agrupaciones-cluster" class="nav-link" data-scroll-target="#fi---visualización-de-las-agrupaciones-cluster">05fi - Visualización de las agrupaciones cluster</a></li>
  <li><a href="#fj---validación-de-la-agrupación" id="toc-fj---validación-de-la-agrupación" class="nav-link" data-scroll-target="#fj---validación-de-la-agrupación">05fj - Validación de la agrupación</a>
  <ul class="collapse">
  <li><a href="#interna" id="toc-interna" class="nav-link" data-scroll-target="#interna">Interna</a></li>
  <li><a href="#externa" id="toc-externa" class="nav-link" data-scroll-target="#externa">Externa</a></li>
  </ul></li>
  <li><a href="#fk---resumen-de-resultados-obtenidos" id="toc-fk---resumen-de-resultados-obtenidos" class="nav-link" data-scroll-target="#fk---resumen-de-resultados-obtenidos">05fk - Resumen de resultados obtenidos</a></li>
  </ul></li>
  <li><a href="#salidas-del-subproceso" id="toc-salidas-del-subproceso" class="nav-link" data-scroll-target="#salidas-del-subproceso">Salidas del subproceso</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Resultados - Análisis cluster</h1>
<p class="subtitle lead">Resultados</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Teodoro José Martínez Arán </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="descripción-del-subproceso" class="level2">
<h2 class="anchored" data-anchor-id="descripción-del-subproceso">Descripción del subproceso</h2>
<p>Subproceso destinado a agrupar observaciones en base a su similitud, de modo que las observaciones pertenecientes a cada uno de los grupos tengan características similares.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Configuración</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Establecer una semilla aleatoria para el análisis</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2024</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Impedir que los números grandes se muestren con notación científica</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="acciones-del-subproceso" class="level2">
<h2 class="anchored" data-anchor-id="acciones-del-subproceso">Acciones del subproceso</h2>
<p>Se llevó a cabo un conjunto de análisis cluster (5 en total), siguiendo la siguiente metodología</p>
<ul>
<li>05fa - Selección de los datos adecuados para el análisis cluster</li>
<li>05fb - Estandarización de valores numéricos</li>
<li>05fc - Cálculo de la distancia entre observaciones</li>
<li>05fd - Análisis de tendencia de agrupación</li>
<li>05fe - Elección del método y la vinculación de grupos</li>
<li>05ff - Elección del número de grupos finales de forma arbitraria basados en ciertos estadísticos de agrupación.</li>
<li>05fg - Representación e interpretación de los resultados.</li>
<li>05fh - Evaluación de la importancia de las variables</li>
<li>05fi - Visualización de las agrupaciones cluster</li>
<li>05fj - Validación de la agrupación</li>
<li>05fk - Resumen de los resultados obtenidos</li>
</ul>
<section id="fa---selección-de-los-datos-adecuados-para-el-análisis-cluster" class="level3">
<h3 class="anchored" data-anchor-id="fa---selección-de-los-datos-adecuados-para-el-análisis-cluster">05fa - Selección de los datos adecuados para el análisis cluster</h3>
<p>Durante la fase de análisis exploratorio se evidenció una marcada diferencia en la mortalidad relacionada con alcohol entre ambos sexos, por lo que se analizará el dataset <code>data_lab</code> para controlar el efecto de la variable <code>Sex</code>.</p>
<p>Además, se observaron problemas de valores atípicos en los distintos conjuntos de datos considerados para el análisis. Estas observaciones podrían ser muy interesantes para nuestro análisis, porque pueden contener información sobre los factores de riesgo más asociados a la mortalidad por alcohol.</p>
<ul>
<li><code>data_lab</code>: con todos los datos (incluyendo <em>outliers</em>), y</li>
<li><code>data_inliers_lab</code>: con datos recortados (sin <em>outliers</em>).</li>
</ul>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ingesta</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data_lab <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'lab'</span>, <span class="st">'data_lab.rds'</span>)) </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>data_inliers_lab  <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'lab'</span>, <span class="st">'data_inliers_lab.rds'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="fb---estandarización-de-valores-numéricos" class="level3">
<h3 class="anchored" data-anchor-id="fb---estandarización-de-valores-numéricos">05fb - Estandarización de valores numéricos</h3>
<p>Para impedir que las diferencias de magnitud entre las variables numéricas alterase la agrupación, se escalaron los valores de ambos datasets.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data_std <span class="ot">&lt;-</span> <span class="fu">scale</span>(data_lab[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>data_inliers_std <span class="ot">&lt;-</span> <span class="fu">scale</span>(data_inliers_lab[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="fc---cálculo-de-la-distancia-entre-observaciones" class="level3">
<h3 class="anchored" data-anchor-id="fc---cálculo-de-la-distancia-entre-observaciones">05fc - Cálculo de la distancia entre observaciones</h3>
<p>Se utilizó la función <code>stat::dist()</code> con los parámetros por defecto (distancia euclídea):</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>data_dist <span class="ot">&lt;-</span> <span class="fu">dist</span>(data_std)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>data_inliers_dist <span class="ot">&lt;-</span> <span class="fu">dist</span>(data_inliers_std)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="visualización-de-la-relación-entre-las-variables-estandarizadas" class="level4">
<h4 class="anchored" data-anchor-id="visualización-de-la-relación-entre-las-variables-estandarizadas">Visualización de la relación entre las variables estandarizadas</h4>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(data_lab[<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>], ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">colour =</span> Sex)) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(<span class="st">'Objeto data_lab'</span>, <span class="at">subtitle =</span> <span class="st">'Análisis de correlación'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos recortados</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(data_inliers_lab[<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>], ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">colour =</span> Sex)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(<span class="st">'Objeto data_inliers_lab'</span>, <span class="at">subtitle =</span> <span class="st">'Análisis de correlación'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="fd---análisis-de-tendencia-de-agrupación" class="level3">
<h3 class="anchored" data-anchor-id="fd---análisis-de-tendencia-de-agrupación">05fd - Análisis de tendencia de agrupación</h3>
<p>Valoramos en primer lugar si es pertinente realizar un análisis de agrupación de los datos. Para ello:</p>
<ul>
<li>Analizamos visualmente los clústeres de datos con el análisis visual de tendencia (VAT)</li>
<li>Evaluamos la tendencia de agrupación con el estadístico de Hopkins.</li>
</ul>
<section id="evaluación-visual-de-tendencia-vat" class="level4">
<h4 class="anchored" data-anchor-id="evaluación-visual-de-tendencia-vat">Evaluación visual de tendencia (VAT)</h4>
<p>Este mapa del calor reordena la matriz de tal manera que observaciones similares se localizan cerca. Visualmente, se observan entre tres y cinco grandes clusters, que son más evidentes cuando se eliminan los outliers.</p>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_dist</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  data_dist,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">lab_size =</span> .<span class="dv">1</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_labels =</span> <span class="cn">FALSE</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Evaluación visual de tendencia de agrupación (VAT)"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Datos completos (`data_lab`)'</span> </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_dist</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_dist,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">lab_size =</span> .<span class="dv">1</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_labels =</span> <span class="cn">FALSE</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Evaluación visual de tendencia de agrupación (VAT)"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Datos sin outliers (`data_inliers_lab`)'</span> </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="estadística-de-hopkins" class="level4">
<h4 class="anchored" data-anchor-id="estadística-de-hopkins">Estadística de Hopkins</h4>
<p>En ambos supuestos (datos totales y recortados), el valor es distinto de 0.5, por lo que suponemos que las distancias observadas entre el conjunto de datos aleatorio y el conjunto de datos real no se debe al azar, y, por tanto, existe tendencia de agrupación.</p>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>clustertend<span class="sc">::</span><span class="fu">hopkins</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">nrow</span>(data_std) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$H
[1] 0.1920877</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>clustertend<span class="sc">::</span><span class="fu">hopkins</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_std,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">nrow</span>(data_inliers_std) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in clustertend::hopkins(data_inliers_std, n = nrow(data_inliers_std) -
: Package `clustertend` is deprecated.  Use package `hopkins` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$H
[1] 0.3202928</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="fe---elección-del-método-y-la-vinculación-de-grupos" class="level3">
<h3 class="anchored" data-anchor-id="fe---elección-del-método-y-la-vinculación-de-grupos">05fe - Elección del método y la vinculación de grupos</h3>
<p>Se utilizó el método de agrupación por <span class="math inline">\(k\)</span>-medias.</p>
</section>
<section id="ff---elección-del-número-de-grupos-finales-de-forma-arbitraria-basados-en-ciertos-estadísticos-de-agrupación." class="level3">
<h3 class="anchored" data-anchor-id="ff---elección-del-número-de-grupos-finales-de-forma-arbitraria-basados-en-ciertos-estadísticos-de-agrupación.">05ff - Elección del número de grupos finales de forma arbitraria basados en ciertos estadísticos de agrupación.</h3>
<section id="según-criterios-de-calidad-interna" class="level5">
<h5 class="anchored" data-anchor-id="según-criterios-de-calidad-interna">Según criterios de calidad interna</h5>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>En el dataset completo, la mayoría de métodos sitúa el óptimo de clústeres entre 2 y 4.</p>
<div class="cell" data-info="false">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>nb <span class="ot">&lt;-</span> NbClust<span class="sc">::</span><span class="fu">NbClust</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data_std,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">distance =</span> <span class="st">'euclidean'</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">min.nc =</span> <span class="dv">2</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.nc =</span> <span class="dv">15</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"kmeans"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">index =</span> <span class="st">"all"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>*** : The Hubert index is a graphical method of determining the number of clusters.
                In the plot of Hubert index, we seek a significant knee that corresponds to a 
                significant increase of the value of the measure i.e the significant peak in Hubert
                index second differences plot. 
 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>*** : The D index is a graphical method of determining the number of clusters. 
                In the plot of D index, we seek a significant knee (the significant peak in Dindex
                second differences plot) that corresponds to a significant increase of the value of
                the measure. 
 
******************************************************************* 
* Among all indices:                                                
* 8 proposed 2 as the best number of clusters 
* 3 proposed 3 as the best number of clusters 
* 5 proposed 4 as the best number of clusters 
* 1 proposed 5 as the best number of clusters 
* 2 proposed 12 as the best number of clusters 
* 2 proposed 14 as the best number of clusters 
* 3 proposed 15 as the best number of clusters 

                   ***** Conclusion *****                            
 
* According to the majority rule, the best number of clusters is  2 
 
 
******************************************************************* </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>En el dataset sin outliers, el número óptimo de clústeres está entre 2 y 3.</p>
<div class="cell" data-info="false">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>nb_inliers <span class="ot">&lt;-</span> NbClust<span class="sc">::</span><span class="fu">NbClust</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data_inliers_std,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">distance =</span> <span class="st">'euclidean'</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">min.nc =</span> <span class="dv">2</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">max.nc =</span> <span class="dv">15</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"kmeans"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">index =</span> <span class="st">"all"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>*** : The Hubert index is a graphical method of determining the number of clusters.
                In the plot of Hubert index, we seek a significant knee that corresponds to a 
                significant increase of the value of the measure i.e the significant peak in Hubert
                index second differences plot. 
 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>*** : The D index is a graphical method of determining the number of clusters. 
                In the plot of D index, we seek a significant knee (the significant peak in Dindex
                second differences plot) that corresponds to a significant increase of the value of
                the measure. 
 
******************************************************************* 
* Among all indices:                                                
* 6 proposed 2 as the best number of clusters 
* 7 proposed 3 as the best number of clusters 
* 2 proposed 4 as the best number of clusters 
* 1 proposed 5 as the best number of clusters 
* 1 proposed 7 as the best number of clusters 
* 1 proposed 10 as the best number of clusters 
* 1 proposed 11 as the best number of clusters 
* 1 proposed 12 as the best number of clusters 
* 3 proposed 15 as the best number of clusters 

                   ***** Conclusion *****                            
 
* According to the majority rule, the best number of clusters is  3 
 
 
******************************************************************* </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="según-criterios-de-estabilidad" class="level4">
<h4 class="anchored" data-anchor-id="según-criterios-de-estabilidad">Según criterios de estabilidad</h4>
<p>Dado que no podemos encontrar un nivel de clústeres óptimo en base a los resultados, exploraremos las opciones más repetidas:</p>
<ul>
<li>2, 3 y 4 clústeres para <code>data_lab</code>, y</li>
<li>2 y 3 clústeres para <code>data_inliers_lab</code>.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>data_km2 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(data_std, <span class="at">centers =</span> <span class="dv">2</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>data_km3 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(data_std, <span class="at">centers =</span> <span class="dv">3</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>data_km4 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(data_std, <span class="at">centers =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>data_inliers_km2 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(data_inliers_std, <span class="at">centers =</span> <span class="dv">2</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>data_inliers_km3 <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(data_inliers_std, <span class="at">centers =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="fg---representación-e-interpretación-de-los-resultados." class="level3">
<h3 class="anchored" data-anchor-id="fg---representación-e-interpretación-de-los-resultados.">05fg - Representación e interpretación de los resultados.</h3>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<section id="datos-completos-data_lab" class="level4 callout-body-container callout-body">
<h4 class="anchored" data-anchor-id="datos-completos-data_lab">Datos completos <code>data_lab</code></h4>
<p>Resultados de los modelos de agrupación para <code>data_lab</code></p>
<ul>
<li>Los modelos explican un porcentaje de la variabilidad total observada entre el <span class="math inline">\(34.2\%\)</span> y el <span class="math inline">\(60.3\%\)</span>. El modelo con mejor explicación de los datos observados es el de <span class="math inline">\(k=4\)</span> grupos</li>
<li>Todos los modelos explorados son algo difíciles de interpretar, porque los outliers tienden a agruparse en uno de los grupos del modelo, y dificultan la comprensión de la lógica de la agrupación.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled" title="1a- Agrupación $k = 2$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1a- Agrupación <span class="math inline">\(k = 2\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<section id="agrupación-k-2" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="agrupación-k-2">Agrupación <span class="math inline">\(k = 2\)</span></h5>
<p>El resultado de la agrupación con 2 clústeres es el siguiente</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>data_km2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 2 clusters of sizes 47, 53

Cluster means:
      Deaths   Population AgeAdjustedDeathRate PercentageOfTotalDeaths
1  0.3682663  0.008739900            0.6558077               0.3692895
2 -0.3265758 -0.007750478           -0.5815653              -0.3274831
  HeavyDrinkingAdults BingeDrinkingFrecuencyAdults BingeDrinkingIntensityAdults
1           0.2401494                    0.7865214                    0.9518905
2          -0.2129627                   -0.6974813                   -0.8441293
  BingeDrinkingPrevalenceAdults
1                     0.8775595
2                    -0.7782131

Clustering vector:
  [1] 2 1 2 1 2 1 1 2 2 1 2 1 2 2 1 2 2 1 2 1 2 1 2 1 1 2 2 1 1 2 1 2 2 1 1 2 2
 [38] 1 2 2 1 2 2 1 2 1 2 1 2 1 1 2 1 2 1 2 1 2 1 2 2 1 2 1 1 2 2 1 2 1 2 1 1 2
 [75] 1 2 1 2 2 1 1 2 1 2 1 2 2 2 2 1 2 1 1 2 1 2 2 1 1 2

Within cluster sum of squares by cluster:
[1] 313.382 207.734
 (between_SS / total_SS =  34.2 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_km2<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2 
47 53 </code></pre>
</div>
</div>
<p>La agrupación con dos clústeres explica un 34.2% de la variabilidad total. Ambos clústeres tienen aproximadamente el mismo número de elementos.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>cl_kcca2 <span class="ot">&lt;-</span> flexclust<span class="sc">::</span><span class="fu">as.kcca</span>(data_km2, data_std)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Los dos clústeres se diferencian entre sí esencialmente por los valores del área de interés <code>Alcohol</code> del CDI: valores elevados frente a valores bajos</li>
</ul>
<p>Podemos explorar cómo se comporta cada cluster variable a variable con el siguiente gráfico</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca2, <span class="at">bycluster =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El resultado explica sólo un tercio de la variabilidad total, por lo que no es el ideal.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1b- Agrupación $k = 3$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1b- Agrupación <span class="math inline">\(k = 3\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<section id="agrupación-k-3" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="agrupación-k-3">Agrupación <span class="math inline">\(k = 3\)</span></h5>
<p>La agrupación con tres clústeres explica un 53.9% de la variabilidad total. Los clústeres están muy desequilibrados, con uno de ellos con 3 elementos (los valores <em>outliers</em>)</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>data_km3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 3 clusters of sizes 3, 53, 44

Cluster means:
      Deaths  Population AgeAdjustedDeathRate PercentageOfTotalDeaths
1  4.3130989  4.19117974          -0.07723505               4.3081446
2 -0.3694474 -0.08772454          -0.57798481              -0.3699294
3  0.1509412 -0.18009406           0.70147500               0.1518597
  HeavyDrinkingAdults BingeDrinkingFrecuencyAdults BingeDrinkingIntensityAdults
1         -0.08912443                   -0.4226871                   0.08665392
2         -0.22990896                   -0.6788862                  -0.81480631
3          0.28301245                    0.8465688                   0.97556302
  BingeDrinkingPrevalenceAdults
1                     0.1021575
2                    -0.7484900
3                     0.8946250

Clustering vector:
  [1] 2 3 2 3 2 3 3 2 1 1 2 3 2 2 3 2 2 3 2 3 2 3 2 3 3 2 2 3 3 2 3 2 2 3 3 2 2
 [38] 3 2 2 3 2 2 3 2 3 2 3 2 3 3 2 3 2 3 2 3 2 2 2 2 3 2 3 3 2 2 3 2 3 2 3 3 2
 [75] 3 2 3 2 2 3 3 2 3 2 1 2 2 2 2 3 2 3 3 2 3 2 2 3 3 2

Within cluster sum of squares by cluster:
[1]  35.42998 174.80886 154.98956
 (between_SS / total_SS =  53.9 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_km3<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3 
 3 53 44 </code></pre>
</div>
</div>
<p>La presencia del grupo con los outliers (cluster 1) dificulta la interpretación visual de los otros dos grupos, tanto en el gráfico global como por variables</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>cl_kcca3 <span class="ot">&lt;-</span> flexclust<span class="sc">::</span><span class="fu">as.kcca</span>(data_km3, data_std)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca3, <span class="at">bycluster =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El resultado está genera una agrupación muy desbalanceada, por lo que tampoco parece el modelo óptimo.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1c- Agrupación $k = 4$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1c- Agrupación <span class="math inline">\(k = 4\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<section id="agrupación-k-4" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="agrupación-k-4">Agrupación <span class="math inline">\(k = 4\)</span></h5>
<p>La agrupación con cuatro clústeres explica un 60.3% de la variabilidad total. De nuevo, una de las clases tiene muy pocos elementos (outliers)</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>data_km4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 4 clusters of sizes 34, 44, 19, 3

Cluster means:
      Deaths Population AgeAdjustedDeathRate PercentageOfTotalDeaths
1 -0.3061696  0.1239105          -0.70617977              -0.3063393
2  0.1509412 -0.1800941           0.70147500               0.1518597
3 -0.4826812 -0.4664399          -0.34858329              -0.4837223
4  4.3130989  4.1911797          -0.07723505               4.3081446
  HeavyDrinkingAdults BingeDrinkingFrecuencyAdults BingeDrinkingIntensityAdults
1         -0.87551644                   -0.5579573                  -0.71049012
2          0.28301245                    0.8465688                   0.97556302
3          0.92538864                   -0.8952852                  -1.00147740
4         -0.08912443                   -0.4226871                   0.08665392
  BingeDrinkingPrevalenceAdults
1                    -0.9131593
2                     0.8946250
3                    -0.4538187
4                     0.1021575

Clustering vector:
  [1] 1 2 3 2 1 2 2 1 4 4 3 2 1 1 2 1 3 2 1 2 3 2 3 2 2 1 1 2 2 1 2 1 1 2 2 3 3
 [38] 2 1 1 2 3 1 2 3 2 1 2 1 2 2 3 2 3 2 1 2 3 1 1 1 2 1 2 2 1 1 2 1 2 1 2 2 3
 [75] 2 1 2 3 1 2 2 3 2 1 4 1 1 1 3 2 1 2 2 3 2 1 3 2 2 3

Within cluster sum of squares by cluster:
[1]  90.04538 154.98956  33.67188  35.42998
 (between_SS / total_SS =  60.3 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_km4<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4 
34 44 19  3 </code></pre>
</div>
</div>
<p>El clúster que contiene los outliers también dificulta la interpretación de los grupos, aunque se intuye que se diferencian los siguientes cuatro grupos de estados en relación con los indicadores:</p>
<ul>
<li>Indicadores con valores bajos</li>
<li>Indicadores con valores altos</li>
<li>Indicadores con valores bajos en general, pero con valores muy altos en el número de adultos grandes bebedores (<code>HeavyDrinkingAdults</code>)</li>
<li><em>Outliers</em></li>
</ul>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>cl_kcca4 <span class="ot">&lt;-</span> flexclust<span class="sc">::</span><span class="fu">as.kcca</span>(data_km4, data_std)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_kcca4, <span class="at">bycluster =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</div>
</div>
</section>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<section id="datos-recortados-data_inliers_lab" class="level4 callout-body-container callout-body">
<h4 class="anchored" data-anchor-id="datos-recortados-data_inliers_lab">Datos recortados <code>data_inliers_lab</code></h4>
<p>Resultados de los modelos de agrupación para <code>data_inliers_lab</code></p>
<ul>
<li>Los modelos explican un porcentaje de la variabilidad total observada entre el <span class="math inline">\(38.32\%\)</span> y el <span class="math inline">\(54\%\)</span>. El modelo con mejor explicación de los datos observados es el de <span class="math inline">\(k=3\)</span> grupos</li>
<li>Los modelos con datos recortados explican un menor porcentaje de la variabilidad que los de datos completos; los outliers una capturan parte considerable de la información, y deben estudiarse con detalle.</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled" title="1a- Agrupación $k = 2$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1a- Agrupación <span class="math inline">\(k = 2\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<section id="agrupación-k-2-1" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="agrupación-k-2-1">Agrupación <span class="math inline">\(k = 2\)</span></h5>
<p>El resultado de la agrupación con 2 clústeres es el siguiente</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>data_inliers_km2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 2 clusters of sizes 47, 38

Cluster means:
      Deaths  Population AgeAdjustedDeathRate PercentageOfTotalDeaths
1 -0.4589491  0.01354511           -0.5754245              -0.4594738
2  0.5676475 -0.01675316            0.7117093               0.5682965
  HeavyDrinkingAdults BingeDrinkingFrecuencyAdults BingeDrinkingIntensityAdults
1          -0.2474507                   -0.6719943                   -0.7956304
2           0.3060574                    0.8311508                    0.9840692
  BingeDrinkingPrevalenceAdults
1                    -0.7391938
2                     0.9142660

Clustering vector:
 [1] 1 2 1 1 2 1 1 2 1 1 2 1 2 1 2 1 2 1 2 2 1 1 2 2 1 2 1 1 2 2 1 1 2 1 1 2 1 1
[39] 2 1 2 1 2 1 2 2 1 2 1 2 1 2 1 2 1 1 2 1 1 2 1 2 2 1 2 1 2 1 1 2 1 2 1 1 1 2
[77] 1 2 2 1 2 1 1 2 1

Within cluster sum of squares by cluster:
[1] 194.8370 220.0857
 (between_SS / total_SS =  38.3 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_inliers_km2<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2 
47 38 </code></pre>
</div>
</div>
<p>La agrupación con dos clústeres explica un 38.32% de la variabilidad total. El primer clúster tiene un poco más de elementos que el segundo.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>cl_inliers_kcca2 <span class="ot">&lt;-</span> flexclust<span class="sc">::</span><span class="fu">as.kcca</span>(data_inliers_km2, data_inliers_std)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_inliers_kcca2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Los dos clústeres se diferencian entre sí por los valores del área de interés <code>Alcohol</code> del CDI: valores elevados frente a valores bajos</li>
</ul>
<p>Podemos explorar cómo se comporta cada cluster variable a variable con el siguiente gráfico</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_inliers_kcca2, <span class="at">bycluster =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El resultado explica un porcentaje muy pequeño de la variabilidad total, por lo que descartamos este modelo.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1b- Agrupación $k = 3$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1b- Agrupación <span class="math inline">\(k = 3\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<section id="agrupación-k-3-1" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="agrupación-k-3-1">Agrupación <span class="math inline">\(k = 3\)</span></h5>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data_inliers_km3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>K-means clustering with 3 clusters of sizes 46, 21, 18

Cluster means:
      Deaths  Population AgeAdjustedDeathRate PercentageOfTotalDeaths
1 -0.4493276  0.04012181           -0.6287279              -0.4498983
2 -0.4025428 -0.79250443            0.8438625              -0.4000449
3  1.6179149  0.82205500            0.6222427               1.6164592
  HeavyDrinkingAdults BingeDrinkingFrecuencyAdults BingeDrinkingIntensityAdults
1         -0.30556333                   -0.6793351                   -0.7957634
2          0.59375047                    0.9167504                    0.9828087
3          0.08817519                    0.6665364                    0.8870074
  BingeDrinkingPrevalenceAdults
1                    -0.7451478
2                     0.9124341
3                     0.8397601

Clustering vector:
 [1] 1 2 2 1 2 1 1 3 1 1 2 1 2 1 3 1 2 1 2 3 1 1 3 2 1 2 1 1 2 2 1 1 2 1 1 3 1 1
[39] 3 1 3 1 2 1 3 2 1 2 1 2 1 2 1 3 1 1 3 1 1 2 1 3 3 1 3 1 2 1 1 3 1 3 1 1 1 2
[77] 1 3 3 1 2 1 1 3 1

Within cluster sum of squares by cluster:
[1] 179.27434  70.36247  59.31009
 (between_SS / total_SS =  54.0 %)

Available components:

[1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"
[6] "betweenss"    "size"         "iter"         "ifault"      </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_inliers_km3<span class="sc">$</span>cluster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3 
46 21 18 </code></pre>
</div>
</div>
<p>La agrupación con dos clústeres explica un 54% de la variabilidad total. El primer cluster tiene más elementos que los otros dos juntos.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>cl_inliers_kcca3 <span class="ot">&lt;-</span> flexclust<span class="sc">::</span><span class="fu">as.kcca</span>(data_inliers_km3, data_inliers_std)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_inliers_kcca3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>El primer cluster agrupa estados con indicadores con bajores bajos para todas las variables.</li>
<li>El segundo incluye aquellos estados con indicadores por encima de la media, excepto el número de adultos grandes bebedores, pero en los que la tasa de muerte ajustada por edad está por debajo de la media</li>
<li>El tercero agrupa a los estados con indicadores por encima de la media, incluido el porcentaje de adultos grandes bebedores, y en el que la tasa de muerte también es alta.</li>
</ul>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">barplot</span>(cl_inliers_kcca3, <span class="at">bycluster =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="fh---evaluación-de-la-importancia-de-las-variables" class="level3">
<h3 class="anchored" data-anchor-id="fh---evaluación-de-la-importancia-de-las-variables">05fh - Evaluación de la importancia de las variables</h3>
<div class="callout callout-style-default callout-note callout-titled" title="1- Objeto `data_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Objeto <code>data_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Los resultados de la evaluación de la importancia de las variables para los modelos para datos completos fueron los siguientes:</p>
<ul>
<li>En los modelos de 2 y 3 clústeres para datos completos, las variables más importantes para establecer la agrupación fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</li>
<li>Para el modelo con 4 clústeres, la variable más importante con diferencia fue la de grandes bebedores (<code>HeavyDrinkingAdults</code>), seguida de las tres variables relacionadas con borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled" title="1a- Agrupación k = 2">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1a- Agrupación k = 2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  cl_kcca2, </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_std)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>importance_inliers <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  cl_inliers_kcca2, </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_inliers_std))</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance_inliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el modelo de 2 clústeres para datos completos, las variables más importantes para establecer la agrupación fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1b- Agrupación k = 3">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1b- Agrupación k = 3
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  cl_kcca3, </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_std)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>importance_inliers <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  cl_inliers_kcca3, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_inliers_std))</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance_inliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-32-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el modelo de 3 clústeres para datos completos, las variables más importantes para establecer la agrupación fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1c- Agrupación k = 4">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1c- Agrupación k = 4
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  cl_kcca4, </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_std)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el modelo con 4 clústeres, la variable más importante con diferencia fue la de grandes bebedores (<code>HeavyDrinkingAdults</code>), seguida de las tres variables relacionadas con borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="2- Objeto `data_inliers_lab`">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Objeto <code>data_inliers_lab</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Los resultados de la evaluación de la importancia de las variables para los modelos para datos recortados fueron los siguientes:</p>
<ul>
<li>En el modelo de 2 clústeres para datos recortados, las variables más importantes para establecer la agrupación fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</li>
<li>Para el modelo con 3 clústeres, las variables más importantes para establecer la agrupación fueron las relacionadas el número de muertes relacionadas con alcohol (<code>Deaths</code> y <code>PercentageOfTotalDeaths</code>), seguido de la prevalencia de borracheras (<code>BingeDrinkingPrevalenceAdults</code>).</li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled" title="1a- Agrupación k = 2">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1a- Agrupación k = 2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>importance_inliers <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  cl_inliers_kcca2, </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_inliers_std))</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance_inliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el modelo de 2 clústeres para datos recortados, las variables más importantes para establecer la agrupación fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1b- Agrupación k = 3">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1b- Agrupación k = 3
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>importance_inliers <span class="ot">&lt;-</span> FeatureImpCluster<span class="sc">::</span><span class="fu">FeatureImpCluster</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  cl_inliers_kcca3, </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  data.table<span class="sc">::</span><span class="fu">as.data.table</span>(data_inliers_std))</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(importance_inliers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el modelo de 3 clústeres para datos recortados, las variables más importantes para establecer la agrupación fueron las relacionadas el número de muertes relacionadas con alcohol (<code>Deaths</code> y <code>PercentageOfTotalDeaths</code>), seguido de la prevalencia de borracheras (<code>BingeDrinkingPrevalenceAdults</code>).</p>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="fi---visualización-de-las-agrupaciones-cluster" class="level3">
<h3 class="anchored" data-anchor-id="fi---visualización-de-las-agrupaciones-cluster">05fi - Visualización de las agrupaciones cluster</h3>
<div class="callout callout-style-default callout-caution callout-titled" title="1a- Modelos $k = 2$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1a- Modelos <span class="math inline">\(k = 2\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<section id="modelos-con-k-2" class="level4 callout-body-container callout-body">
<h4 class="anchored" data-anchor-id="modelos-con-k-2">Modelos con <span class="math inline">\(k = 2\)</span></h4>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  data_km2, </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"k=2 grupos, datos completos"</span>,</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State, </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>AgeAdjustedDeathRate, </span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo de 2 clústeres en los datos completos está fuertemente influenciado por los outliers, y crea unos clústers con poco sentido.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_km2, </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_std,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"k=2 grupos, datos recortados (sin outliers)"</span>,</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>State, </span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate, </span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Al eliminar los outliers, el modelo agrupa los datos en dos grandes bloques, sin solapamientos</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Modelos con $k=3$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modelos con <span class="math inline">\(k=3\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<section id="modelos-con-k3" class="level4 callout-body-container callout-body">
<h4 class="anchored" data-anchor-id="modelos-con-k3">Modelos con <span class="math inline">\(k=3\)</span></h4>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  data_km3, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"k=3 grupos (datos completos)"</span>,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State, </span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>AgeAdjustedDeathRate, </span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo de tres clústeres para los datos completos separa un grupo con los outliers, y otros dos grupos dentro del resto de los datos.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos recortados</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_km3, </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_std,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"k=3 grupos, datos recortados (sin outliers)"</span>,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>State, </span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate, </span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Al eliminar los outliers, el modelo de tres clústeres es capaz de separar tres grupos de datos con una cierta coherencia visual.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="Modelos con $k=4$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modelos con <span class="math inline">\(k=4\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse">
<section id="modelo-con-k4" class="level4 callout-body-container callout-body">
<h4 class="anchored" data-anchor-id="modelo-con-k4">Modelo con <span class="math inline">\(k=4\)</span></h4>
<p>El modelo de cuatro clústeres para los datos completos separa un grupo con los outliers, y dos de los grupos presentan un alto grado de solapamiento en la representación bidimensional.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  data_km4, </span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"k=4 grupos (datos completos)"</span>,</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State, </span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>AgeAdjustedDeathRate, </span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Al representarlo en tres dimensiones, se observa que el solapamiento es menor. Por ejemplo, eligiendo las tres variables con mayor importancia para la agrupación del modelo <span class="math inline">\(k = 4\)</span>, se puede obtener este gráfico interactivo:</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> data_lab[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>cluster <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_km4<span class="sc">$</span>cluster)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> plotly<span class="sc">::</span><span class="fu">plot_ly</span>(</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  df, </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>HeavyDrinkingAdults, </span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>BingeDrinkingIntensityAdults,</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="sc">~</span>BingeDrinkingFrecuencyAdults, </span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">'markers'</span>,</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>cluster,</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">hoverinfo =</span> <span class="st">'text'</span>,</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/br&gt; State:'</span>, State,</span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/br&gt; Sex:'</span>, Sex,</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/br&gt; Heavy Drinking Adults:'</span>, HeavyDrinkingAdults,</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/br&gt; Binge Drinking Intensity Adults:'</span>, BingeDrinkingIntensityAdults,</span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/br&gt; Binge Drinking Frecuency Adults:'</span>, BingeDrinkingFrecuencyAdults</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">add_markers</span>(<span class="at">size =</span> <span class="fl">1.5</span>)</span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d96222b5190c23aef698" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d96222b5190c23aef698">{"x":{"visdat":{"83f757fe49e8":["function () ","plotlyVisDat"]},"cur_data":"83f757fe49e8","attrs":{"83f757fe49e8":{"x":{},"y":{},"z":{},"mode":"markers","hoverinfo":"text","text":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","size":1.5,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"HeavyDrinkingAdults"},"yaxis":{"title":"BingeDrinkingIntensityAdults"},"zaxis":{"title":"BingeDrinkingFrecuencyAdults"}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[4,5.5,5.7000000000000002,4.7000000000000002,6.2000000000000002,4.5999999999999996,5.9000000000000004,4.5,6.0999999999999996,6,5.7999999999999998,3.5,5.0999999999999996,4.7000000000000002,6.0999999999999996,5.7999999999999998,5.9000000000000004,5.2999999999999998,5.2000000000000002,5.5999999999999996,4.9000000000000004,6,5.9000000000000004,5.5999999999999996,6,2.7000000000000002,6.2999999999999998,6.2000000000000002,6.0999999999999996,4.5999999999999996,3.3999999999999999,4.5,6.2000000000000002,4.2999999999999998],"y":[5.5,5.9000000000000004,6.2000000000000002,7.0999999999999996,5.4000000000000004,5.9000000000000004,5.2000000000000002,4.9000000000000004,5.2999999999999998,6.2000000000000002,5.5,5.5,5,7.5,5.4000000000000004,5.9000000000000004,5.5,4.5999999999999996,7.4000000000000004,5.5999999999999996,5.4000000000000004,5,5.2000000000000002,6.0999999999999996,5.7999999999999998,5.2999999999999998,5.4000000000000004,5.5,5.2999999999999998,5.2000000000000002,5.7999999999999998,8.0999999999999996,5.4000000000000004,6.0999999999999996],"z":[4.2999999999999998,4.2000000000000002,6,4.7999999999999998,3.7999999999999998,4.5999999999999996,4.5999999999999996,3.7000000000000002,4,3.8999999999999999,4.0999999999999996,3.1000000000000001,3.3999999999999999,4.5999999999999996,4.2000000000000002,5.0999999999999996,5.0999999999999996,3.1000000000000001,4.5999999999999996,4.2999999999999998,4.2999999999999998,4.0999999999999996,3.3999999999999999,3.6000000000000001,4.5999999999999996,3.2000000000000002,3.7999999999999998,4.7999999999999998,5.9000000000000004,3.5,3.8999999999999999,4.7999999999999998,4.7999999999999998,5.2000000000000002],"mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<\/br> State: AL <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 4.3","<\/br> State: AZ <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.5 <\/br> Binge Drinking Intensity Adults: 5.9 <\/br> Binge Drinking Frecuency Adults: 4.2","<\/br> State: AR <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.7 <\/br> Binge Drinking Intensity Adults: 6.2 <\/br> Binge Drinking Frecuency Adults: 6","<\/br> State: CT <\/br> Sex: Male <\/br> Heavy Drinking Adults: 4.7 <\/br> Binge Drinking Intensity Adults: 7.1 <\/br> Binge Drinking Frecuency Adults: 4.8","<\/br> State: CT <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.2 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 3.8","<\/br> State: DE <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4.6 <\/br> Binge Drinking Intensity Adults: 5.9 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: GA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.9 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: IL <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4.5 <\/br> Binge Drinking Intensity Adults: 4.9 <\/br> Binge Drinking Frecuency Adults: 3.7","<\/br> State: IN <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.1 <\/br> Binge Drinking Intensity Adults: 5.3 <\/br> Binge Drinking Frecuency Adults: 4","<\/br> State: IA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6 <\/br> Binge Drinking Intensity Adults: 6.2 <\/br> Binge Drinking Frecuency Adults: 3.9","<\/br> State: KS <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.8 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 4.1","<\/br> State: KY <\/br> Sex: Female <\/br> Heavy Drinking Adults: 3.5 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 3.1","<\/br> State: MD <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.1 <\/br> Binge Drinking Intensity Adults: 5 <\/br> Binge Drinking Frecuency Adults: 3.4","<\/br> State: MD <\/br> Sex: Male <\/br> Heavy Drinking Adults: 4.7 <\/br> Binge Drinking Intensity Adults: 7.5 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: MI <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.1 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 4.2","<\/br> State: MS <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.8 <\/br> Binge Drinking Intensity Adults: 5.9 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: MO <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.9 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: NV <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.3 <\/br> Binge Drinking Intensity Adults: 4.6 <\/br> Binge Drinking Frecuency Adults: 3.1","<\/br> State: NJ <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.2 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: NJ <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.6 <\/br> Binge Drinking Intensity Adults: 5.6 <\/br> Binge Drinking Frecuency Adults: 4.3","<\/br> State: NM <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4.9 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 4.3","<\/br> State: NY <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6 <\/br> Binge Drinking Intensity Adults: 5 <\/br> Binge Drinking Frecuency Adults: 4.1","<\/br> State: NC <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.9 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 3.4","<\/br> State: ND <\/br> Sex: Female <\/br> Heavy Drinking Adults: 5.6 <\/br> Binge Drinking Intensity Adults: 6.1 <\/br> Binge Drinking Frecuency Adults: 3.6","<\/br> State: OH <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6 <\/br> Binge Drinking Intensity Adults: 5.8 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: OK <\/br> Sex: Female <\/br> Heavy Drinking Adults: 2.7 <\/br> Binge Drinking Intensity Adults: 5.3 <\/br> Binge Drinking Frecuency Adults: 3.2","<\/br> State: PA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.3 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 3.8","<\/br> State: SC <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.2 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 4.8","<\/br> State: TN <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.1 <\/br> Binge Drinking Intensity Adults: 5.3 <\/br> Binge Drinking Frecuency Adults: 5.9","<\/br> State: TX <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4.6 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 3.5","<\/br> State: UT <\/br> Sex: Female <\/br> Heavy Drinking Adults: 3.4 <\/br> Binge Drinking Intensity Adults: 5.8 <\/br> Binge Drinking Frecuency Adults: 3.9","<\/br> State: UT <\/br> Sex: Male <\/br> Heavy Drinking Adults: 4.5 <\/br> Binge Drinking Intensity Adults: 8.1 <\/br> Binge Drinking Frecuency Adults: 4.8","<\/br> State: VA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.2 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 4.8","<\/br> State: WV <\/br> Sex: Female <\/br> Heavy Drinking Adults: 4.3 <\/br> Binge Drinking Intensity Adults: 6.1 <\/br> Binge Drinking Frecuency Adults: 5.2"],"type":"scatter3d","name":"1","marker":{"color":"rgba(102,194,165,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)","size":55},"error_y":{"color":"rgba(102,194,165,1)","width":55},"error_x":{"color":"rgba(102,194,165,1)","width":55},"line":{"color":"rgba(102,194,165,1)","width":55},"frame":null},{"x":[6.7000000000000002,7.5999999999999996,7.2999999999999998,7.2000000000000002,6.5,5.5999999999999996,5.5999999999999996,7.2000000000000002,7.5999999999999996,6.9000000000000004,5.7000000000000002,6.4000000000000004,8.9000000000000004,6.9000000000000004,5.7999999999999998,8,9,5.9000000000000004,7.4000000000000004,7.0999999999999996,6.9000000000000004,8,9.6999999999999993,7.5999999999999996,5.0999999999999996,6.7000000000000002,5.2999999999999998,5.2999999999999998,5.4000000000000004,7.9000000000000004,7.0999999999999996,5.2999999999999998,9,7.2999999999999998,6.5,7.0999999999999996,8.0999999999999996,5.5,8.6999999999999993,5.7999999999999998,6.2999999999999998,6.4000000000000004,8.0999999999999996,6.9000000000000004],"y":[8,8.5999999999999996,8.8000000000000007,8.5,7.5999999999999996,7.5,6.7000000000000002,8.3000000000000007,8.8000000000000007,7.4000000000000004,8.6999999999999993,8.0999999999999996,9.3000000000000007,8.0999999999999996,8.8000000000000007,9.0999999999999996,7.4000000000000004,6.9000000000000004,8,8.3000000000000007,8.3000000000000007,8.5999999999999996,8.1999999999999993,8.3000000000000007,7.4000000000000004,8,7.5999999999999996,7.5999999999999996,7.4000000000000004,9,8.9000000000000004,8.1999999999999993,7.7000000000000002,8.0999999999999996,7.7999999999999998,7.5999999999999996,8.4000000000000004,8,8,8.1999999999999993,7.4000000000000004,9.1999999999999993,8.3000000000000007,8.4000000000000004],"z":[5.7000000000000002,5.7000000000000002,5.5,6.9000000000000004,5.0999999999999996,5.9000000000000004,5,6.5,5.7000000000000002,6,5.7999999999999998,5.5,6,5.5,6.7999999999999998,6,5.7000000000000002,4.5999999999999996,5.7000000000000002,5.0999999999999996,5.5,6,5.5999999999999996,5.2999999999999998,5.7999999999999998,5.5999999999999996,4.9000000000000004,4.7000000000000002,5.2000000000000002,5.0999999999999996,5.9000000000000004,5.5,5.5999999999999996,5.0999999999999996,4.5,5.7999999999999998,5.2999999999999998,6.2000000000000002,5.7999999999999998,5.7999999999999998,5.2000000000000002,6.0999999999999996,4.5,4.9000000000000004],"mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<\/br> State: AL <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.7 <\/br> Binge Drinking Intensity Adults: 8 <\/br> Binge Drinking Frecuency Adults: 5.7","<\/br> State: AK <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.6 <\/br> Binge Drinking Intensity Adults: 8.6 <\/br> Binge Drinking Frecuency Adults: 5.7","<\/br> State: AZ <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.3 <\/br> Binge Drinking Intensity Adults: 8.8 <\/br> Binge Drinking Frecuency Adults: 5.5","<\/br> State: AR <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.2 <\/br> Binge Drinking Intensity Adults: 8.5 <\/br> Binge Drinking Frecuency Adults: 6.9","<\/br> State: CO <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.5 <\/br> Binge Drinking Intensity Adults: 7.6 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: DE <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.6 <\/br> Binge Drinking Intensity Adults: 7.5 <\/br> Binge Drinking Frecuency Adults: 5.9","<\/br> State: DC <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.6 <\/br> Binge Drinking Intensity Adults: 6.7 <\/br> Binge Drinking Frecuency Adults: 5","<\/br> State: GA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.2 <\/br> Binge Drinking Intensity Adults: 8.3 <\/br> Binge Drinking Frecuency Adults: 6.5","<\/br> State: HI <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.6 <\/br> Binge Drinking Intensity Adults: 8.8 <\/br> Binge Drinking Frecuency Adults: 5.7","<\/br> State: ID <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.9 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 6","<\/br> State: IL <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.7 <\/br> Binge Drinking Intensity Adults: 8.7 <\/br> Binge Drinking Frecuency Adults: 5.8","<\/br> State: IN <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.4 <\/br> Binge Drinking Intensity Adults: 8.1 <\/br> Binge Drinking Frecuency Adults: 5.5","<\/br> State: IA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8.9 <\/br> Binge Drinking Intensity Adults: 9.3 <\/br> Binge Drinking Frecuency Adults: 6","<\/br> State: KS <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.9 <\/br> Binge Drinking Intensity Adults: 8.1 <\/br> Binge Drinking Frecuency Adults: 5.5","<\/br> State: KY <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.8 <\/br> Binge Drinking Intensity Adults: 8.8 <\/br> Binge Drinking Frecuency Adults: 6.8","<\/br> State: LA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8 <\/br> Binge Drinking Intensity Adults: 9.1 <\/br> Binge Drinking Frecuency Adults: 6","<\/br> State: ME <\/br> Sex: Male <\/br> Heavy Drinking Adults: 9 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 5.7","<\/br> State: MA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.9 <\/br> Binge Drinking Intensity Adults: 6.9 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: MI <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.4 <\/br> Binge Drinking Intensity Adults: 8 <\/br> Binge Drinking Frecuency Adults: 5.7","<\/br> State: MN <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.1 <\/br> Binge Drinking Intensity Adults: 8.3 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: MS <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.9 <\/br> Binge Drinking Intensity Adults: 8.3 <\/br> Binge Drinking Frecuency Adults: 5.5","<\/br> State: MO <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8 <\/br> Binge Drinking Intensity Adults: 8.6 <\/br> Binge Drinking Frecuency Adults: 6","<\/br> State: MT <\/br> Sex: Male <\/br> Heavy Drinking Adults: 9.7 <\/br> Binge Drinking Intensity Adults: 8.2 <\/br> Binge Drinking Frecuency Adults: 5.6","<\/br> State: NE <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.6 <\/br> Binge Drinking Intensity Adults: 8.3 <\/br> Binge Drinking Frecuency Adults: 5.3","<\/br> State: NV <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.1 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 5.8","<\/br> State: NH <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.7 <\/br> Binge Drinking Intensity Adults: 8 <\/br> Binge Drinking Frecuency Adults: 5.6","<\/br> State: NM <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.3 <\/br> Binge Drinking Intensity Adults: 7.6 <\/br> Binge Drinking Frecuency Adults: 4.9","<\/br> State: NY <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.3 <\/br> Binge Drinking Intensity Adults: 7.6 <\/br> Binge Drinking Frecuency Adults: 4.7","<\/br> State: NC <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.4 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 5.2","<\/br> State: ND <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.9 <\/br> Binge Drinking Intensity Adults: 9 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: OH <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.1 <\/br> Binge Drinking Intensity Adults: 8.9 <\/br> Binge Drinking Frecuency Adults: 5.9","<\/br> State: OK <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.3 <\/br> Binge Drinking Intensity Adults: 8.2 <\/br> Binge Drinking Frecuency Adults: 5.5","<\/br> State: OR <\/br> Sex: Male <\/br> Heavy Drinking Adults: 9 <\/br> Binge Drinking Intensity Adults: 7.7 <\/br> Binge Drinking Frecuency Adults: 5.6","<\/br> State: PA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.3 <\/br> Binge Drinking Intensity Adults: 8.1 <\/br> Binge Drinking Frecuency Adults: 5.1","<\/br> State: RI <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.5 <\/br> Binge Drinking Intensity Adults: 7.8 <\/br> Binge Drinking Frecuency Adults: 4.5","<\/br> State: SC <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7.1 <\/br> Binge Drinking Intensity Adults: 7.6 <\/br> Binge Drinking Frecuency Adults: 5.8","<\/br> State: SD <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8.1 <\/br> Binge Drinking Intensity Adults: 8.4 <\/br> Binge Drinking Frecuency Adults: 5.3","<\/br> State: TN <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.5 <\/br> Binge Drinking Intensity Adults: 8 <\/br> Binge Drinking Frecuency Adults: 6.2","<\/br> State: VT <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8.7 <\/br> Binge Drinking Intensity Adults: 8 <\/br> Binge Drinking Frecuency Adults: 5.8","<\/br> State: VA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.8 <\/br> Binge Drinking Intensity Adults: 8.2 <\/br> Binge Drinking Frecuency Adults: 5.8","<\/br> State: WA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.3 <\/br> Binge Drinking Intensity Adults: 7.4 <\/br> Binge Drinking Frecuency Adults: 5.2","<\/br> State: WV <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.4 <\/br> Binge Drinking Intensity Adults: 9.2 <\/br> Binge Drinking Frecuency Adults: 6.1","<\/br> State: WI <\/br> Sex: Male <\/br> Heavy Drinking Adults: 8.1 <\/br> Binge Drinking Intensity Adults: 8.3 <\/br> Binge Drinking Frecuency Adults: 4.5","<\/br> State: WY <\/br> Sex: Male <\/br> Heavy Drinking Adults: 6.9 <\/br> Binge Drinking Intensity Adults: 8.4 <\/br> Binge Drinking Frecuency Adults: 4.9"],"type":"scatter3d","name":"2","marker":{"color":"rgba(252,141,98,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)","size":55},"error_y":{"color":"rgba(252,141,98,1)","width":55},"error_x":{"color":"rgba(252,141,98,1)","width":55},"line":{"color":"rgba(252,141,98,1)","width":55},"frame":null},{"x":[9.8000000000000007,8.3000000000000007,10.199999999999999,7.2999999999999998,7.0999999999999996,6.9000000000000004,8.5,6.7999999999999998,7.4000000000000004,7.7000000000000002,6.5999999999999996,8,8.6999999999999993,7.2999999999999998,6.0999999999999996,9.9000000000000004,7,8.8000000000000007,7.0999999999999996],"y":[5.5999999999999996,5.5,5.2000000000000002,5.9000000000000004,5.0999999999999996,5.2000000000000002,5.2999999999999998,4.7000000000000002,5.7999999999999998,5.5,5.9000000000000004,4.7000000000000002,5,5,5.5,5.4000000000000004,5,5.2000000000000002,5.7000000000000002],"z":[4.5,3.6000000000000001,4.5999999999999996,3.7999999999999998,3.7000000000000002,4.4000000000000004,4.0999999999999996,3.8999999999999999,4,4.2000000000000002,3.6000000000000001,3.3999999999999999,3.7999999999999998,3.3999999999999999,3.7999999999999998,4.0999999999999996,3.7000000000000002,3.7000000000000002,5.0999999999999996],"mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<\/br> State: AK <\/br> Sex: Female <\/br> Heavy Drinking Adults: 9.8 <\/br> Binge Drinking Intensity Adults: 5.6 <\/br> Binge Drinking Frecuency Adults: 4.5","<\/br> State: CO <\/br> Sex: Female <\/br> Heavy Drinking Adults: 8.3 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 3.6","<\/br> State: DC <\/br> Sex: Female <\/br> Heavy Drinking Adults: 10.2 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 4.6","<\/br> State: HI <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.3 <\/br> Binge Drinking Intensity Adults: 5.9 <\/br> Binge Drinking Frecuency Adults: 3.8","<\/br> State: ID <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.1 <\/br> Binge Drinking Intensity Adults: 5.1 <\/br> Binge Drinking Frecuency Adults: 3.7","<\/br> State: LA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.9 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 4.4","<\/br> State: ME <\/br> Sex: Female <\/br> Heavy Drinking Adults: 8.5 <\/br> Binge Drinking Intensity Adults: 5.3 <\/br> Binge Drinking Frecuency Adults: 4.1","<\/br> State: MA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.8 <\/br> Binge Drinking Intensity Adults: 4.7 <\/br> Binge Drinking Frecuency Adults: 3.9","<\/br> State: MN <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.4 <\/br> Binge Drinking Intensity Adults: 5.8 <\/br> Binge Drinking Frecuency Adults: 4","<\/br> State: MT <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.7 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 4.2","<\/br> State: NE <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.6 <\/br> Binge Drinking Intensity Adults: 5.9 <\/br> Binge Drinking Frecuency Adults: 3.6","<\/br> State: NH <\/br> Sex: Female <\/br> Heavy Drinking Adults: 8 <\/br> Binge Drinking Intensity Adults: 4.7 <\/br> Binge Drinking Frecuency Adults: 3.4","<\/br> State: OR <\/br> Sex: Female <\/br> Heavy Drinking Adults: 8.7 <\/br> Binge Drinking Intensity Adults: 5 <\/br> Binge Drinking Frecuency Adults: 3.8","<\/br> State: RI <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.3 <\/br> Binge Drinking Intensity Adults: 5 <\/br> Binge Drinking Frecuency Adults: 3.4","<\/br> State: SD <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.1 <\/br> Binge Drinking Intensity Adults: 5.5 <\/br> Binge Drinking Frecuency Adults: 3.8","<\/br> State: VT <\/br> Sex: Female <\/br> Heavy Drinking Adults: 9.9 <\/br> Binge Drinking Intensity Adults: 5.4 <\/br> Binge Drinking Frecuency Adults: 4.1","<\/br> State: WA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7 <\/br> Binge Drinking Intensity Adults: 5 <\/br> Binge Drinking Frecuency Adults: 3.7","<\/br> State: WI <\/br> Sex: Female <\/br> Heavy Drinking Adults: 8.8 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 3.7","<\/br> State: WY <\/br> Sex: Female <\/br> Heavy Drinking Adults: 7.1 <\/br> Binge Drinking Intensity Adults: 5.7 <\/br> Binge Drinking Frecuency Adults: 5.1"],"type":"scatter3d","name":"3","marker":{"color":"rgba(141,160,203,1)","size":[55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55,55],"sizemode":"area","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)","size":55},"error_y":{"color":"rgba(141,160,203,1)","width":55},"error_x":{"color":"rgba(141,160,203,1)","width":55},"line":{"color":"rgba(141,160,203,1)","width":55},"frame":null},{"x":[6.5,5.7000000000000002,7],"y":[5.2000000000000002,7.2999999999999998,8.0999999999999996],"z":[3.7000000000000002,4.4000000000000004,5.0999999999999996],"mode":"markers","hoverinfo":["text","text","text"],"text":["<\/br> State: CA <\/br> Sex: Female <\/br> Heavy Drinking Adults: 6.5 <\/br> Binge Drinking Intensity Adults: 5.2 <\/br> Binge Drinking Frecuency Adults: 3.7","<\/br> State: CA <\/br> Sex: Male <\/br> Heavy Drinking Adults: 5.7 <\/br> Binge Drinking Intensity Adults: 7.3 <\/br> Binge Drinking Frecuency Adults: 4.4","<\/br> State: TX <\/br> Sex: Male <\/br> Heavy Drinking Adults: 7 <\/br> Binge Drinking Intensity Adults: 8.1 <\/br> Binge Drinking Frecuency Adults: 5.1"],"type":"scatter3d","name":"4","marker":{"color":"rgba(231,138,195,1)","size":[55,55,55],"sizemode":"area","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)","size":55},"error_y":{"color":"rgba(231,138,195,1)","width":55},"error_x":{"color":"rgba(231,138,195,1)","width":55},"line":{"color":"rgba(231,138,195,1)","width":55},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="fj---validación-de-la-agrupación" class="level3">
<h3 class="anchored" data-anchor-id="fj---validación-de-la-agrupación">05fj - Validación de la agrupación</h3>
<section id="interna" class="level4">
<h4 class="anchored" data-anchor-id="interna">Interna</h4>
<p>Para la validación interna se utilizó el diagrama de silueta, con los siguientes resultados:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 86%">
</colgroup>
<thead>
<tr class="header">
<th>Modelo</th>
<th>Datos</th>
<th>Evaluación del gráfico de silueta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(k=2\)</span></td>
<td>Completos</td>
<td>Los dos clústeres tienen un rendimiento aceptable, aunque en el caso del cluster 1 es inferior a silueta media.</td>
</tr>
<tr class="even">
<td><span class="math inline">\(k=3\)</span></td>
<td>Completos</td>
<td>Dos de los clústeres, tienen un rendimiento bueno, y el cluster más pequeño tiene un rendimiento muy inferior a lo esperado</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(k=4\)</span></td>
<td>Completos</td>
<td>Sólo los clústeres 2 y 3 superaron la silueta media; todos los demás quedaron por debajo de lo deseable.</td>
</tr>
<tr class="even">
<td><span class="math inline">\(k=2\)</span></td>
<td>Recortados</td>
<td>Ambos dos clústeres tienen un rendimiento bueno, por encima de la silueta media</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(k=3\)</span></td>
<td>Recortados</td>
<td>Bastante equilibrado; todos los clústeres tienen un ancho de silueta medio igual al ancho de silueta medio.</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-caution callout-titled" title="1- Modelos $k=2$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1- Modelos <span class="math inline">\(k=2\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>sk2 <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">silhouette</span>(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  data_km2<span class="sc">$</span>cluster, </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  data_dist) </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>sk2_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sk2[,<span class="dv">3</span>])</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico de silueta</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  sk2, </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Silhouette plot - Kmeans k=2 (datos completos)"</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex.names =</span> <span class="fl">0.8</span>, </span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, </span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nmax =</span> <span class="dv">100</span>,</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">do.clust.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> sk2_mean, <span class="at">col =</span> <span class="st">"darkblue"</span>, <span class="at">lty =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Para el modelo de <span class="math inline">\(k=2\)</span> con datos completos, los dos clústeres tienen un rendimiento aceptable, aunque en el caso del cluster 1 es inferior a silueta media.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>sk2_inliers <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">silhouette</span>(</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_km2<span class="sc">$</span>cluster, </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  data_inliers_dist) </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>sk2_inliers_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sk2_inliers[,<span class="dv">3</span>])</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico de silueta</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>  sk2_inliers, </span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Silhouette plot - Kmeans k=2 (datos recortados, sin outliers)"</span>,</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex.names =</span> <span class="fl">0.8</span>, </span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, </span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nmax =</span> <span class="dv">100</span>,</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">do.clust.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> sk2_inliers_mean, <span class="at">col =</span> <span class="st">"darkblue"</span>, <span class="at">lty =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Para el modelo de <span class="math inline">\(k=2\)</span> con datos recortados, ambos dos clústeres tienen un rendimiento bueno, por encima de la silueta media.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="2- Modelos $k=3$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-29-contents" aria-controls="callout-29" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2- Modelos <span class="math inline">\(k=3\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-29" class="callout-29-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>sk3 <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">silhouette</span>(</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  data_km3<span class="sc">$</span>cluster, </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  data_dist) </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>sk3_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sk3[,<span class="dv">3</span>])</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico de silueta</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  sk3, </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Silhouette plot - Kmeans k=3 (datos completos)"</span>,</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex.names =</span> <span class="fl">0.8</span>, </span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nmax =</span> <span class="dv">100</span>,</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">do.clust.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> sk3_mean, <span class="at">col =</span> <span class="st">"darkblue"</span>, <span class="at">lty =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Para el modelo de <span class="math inline">\(k=3\)</span> con datos completos, dos de los clústeres, tienen un rendimiento bueno, y el cluster más pequeño tiene un rendimiento muy inferior a lo esperado.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>sk3_inliers <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">silhouette</span>(</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_km3<span class="sc">$</span>cluster, </span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  data_inliers_dist) </span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>sk3_inliers_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sk3_inliers[,<span class="dv">3</span>])</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico de silueta</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  sk3_inliers, </span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Silhouette plot - Kmeans k=3 (datos recortados, sin outliers)"</span>,</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex.names =</span> <span class="fl">0.8</span>, </span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nmax =</span> <span class="dv">100</span>,</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">do.clust.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> sk3_inliers_mean, <span class="at">col =</span> <span class="st">"darkblue"</span>, <span class="at">lty =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo de <span class="math inline">\(k=3\)</span> con datos recortados es bastante equilibrado. Todos los clústeres tienen un ancho de silueta medio igual al ancho de silueta medio.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="3- Modelos $k=4$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
3- Modelos <span class="math inline">\(k=4\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Datos totales</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>sk4 <span class="ot">&lt;-</span> cluster<span class="sc">::</span><span class="fu">silhouette</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  data_km4<span class="sc">$</span>cluster, </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  data_dist) </span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>sk4_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sk4[,<span class="dv">3</span>])</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co"># gráfico de silueta</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>flexclust<span class="sc">::</span><span class="fu">plot</span>(</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  sk4, </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Silhouette plot - Kmeans k=4 (datos completos)"</span>,</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cex.names =</span> <span class="fl">0.8</span>, </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, </span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nmax =</span> <span class="dv">100</span>,</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">do.clust.stat =</span> <span class="cn">TRUE</span>)</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> sk4_mean, <span class="at">col =</span> <span class="st">"darkblue"</span>, <span class="at">lty =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Para el modelo de <span class="math inline">\(k=4\)</span> con datos completos, sólo los clústeres 2 y 3 superaron la silueta media. Todos los demás quedaron por debajo de lo deseable.</p>
</div>
</div>
</div>
</section>
<section id="externa" class="level4">
<h4 class="anchored" data-anchor-id="externa">Externa</h4>
<p>Se utilizaron las siguientes variables para la validación externa de las agrupaciones:</p>
<ul>
<li>Para los modelos <span class="math inline">\(k=2\)</span>, se utilizó la variable <code>Sex</code>.</li>
<li>Para los modelos <span class="math inline">\(k=3\)</span> se creó una variable instrumental que discretizaba en tres niveles (alta, media y baja) la tasa de mortalidad ajustada por edad <code>AgeAdjustedDeathRate</code>.</li>
<li>Para el modelo <span class="math inline">\(k=4\)</span> se creó una variable instrumental que discretizaba en cuatro niveles (muy alta, alta, baja y muy baja) la tasa de mortalidad ajustada por edad <code>AgeAdjustedDeathRate</code>.</li>
</ul>
<p>Los dos modelos <span class="math inline">\(k=2\)</span>, tanto para datos completos como recortados, se ajustan bastante bien a los niveles de la variable <code>Sex</code>, por lo que capturan una información similar a esta variable.</p>
<p>Los modelos <span class="math inline">\(k=3\)</span> y <span class="math inline">\(k=4\)</span> se relacionan mal con la variable instrumental creada discretizando los valores de la variable <code>AgeAdjustedDeathRate</code>, con lo que es razonable suponer que capturan información no contenida en estas variable.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de las variables instrumentales para data_lab</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable instrumental de 2 niveles</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data_lab<span class="sc">$</span>Sex)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable instrumental de 3 niveles</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>AgeAdjustedDeathRate_3levels_cuts <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">discretize</span>(</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  data_lab<span class="sc">$</span>AgeAdjustedDeathRate,</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cuts =</span> <span class="dv">3</span>,</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Mortalidad baja'</span>, <span class="st">'Mortalidad media'</span>, <span class="st">'Mortalidad alta'</span>),</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">prefix =</span> <span class="st">''</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3 <span class="ot">&lt;-</span> </span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(AgeAdjustedDeathRate_3levels_cuts, data_lab<span class="sc">$</span>AgeAdjustedDeathRate) <span class="sc">|&gt;</span> </span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.factor</span>()</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable instrumental de 4 niveles</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>AgeAdjustedDeathRate_4levels_cuts <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">discretize</span>(</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>  data_lab<span class="sc">$</span>AgeAdjustedDeathRate,</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">cuts =</span> <span class="dv">4</span>,</span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Mortalidad muy baja'</span>, <span class="st">'Mortalidad baja'</span>, <span class="st">'Mortalidad alta'</span>,  <span class="st">'Mortalidad muy alta'</span>),</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">prefix =</span> <span class="st">''</span></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct4 <span class="ot">&lt;-</span> </span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(AgeAdjustedDeathRate_4levels_cuts, data_lab<span class="sc">$</span>AgeAdjustedDeathRate) <span class="sc">|&gt;</span> </span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.factor</span>()</span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpieza de variables temporales intermedias</span></span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(</span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">'AgeAdjustedDeathRate_3levels_cuts'</span>,</span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">'AgeAdjustedDeathRate_4levels_cuts'</span></span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de las variables instrumentales para data_inliers_lab</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable instrumental de 2 niveles</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>data_inliers_lab<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data_inliers_lab<span class="sc">$</span>Sex)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable instrumental de 3 niveles</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>AgeAdjustedDeathRate_inliers_3levels_cuts <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">discretize</span>(</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate,</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cuts =</span> <span class="dv">3</span>,</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Mortalidad baja'</span>, <span class="st">'Mortalidad media'</span>, <span class="st">'Mortalidad alta'</span>),</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">prefix =</span> <span class="st">''</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3 <span class="ot">&lt;-</span> </span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    AgeAdjustedDeathRate_inliers_3levels_cuts, </span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.factor</span>()</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpieza de variables temporales intermedias</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">'AgeAdjustedDeathRate__inliers_3levels_cuts'</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="1 - Modelos con $k=2$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
1 - Modelos con <span class="math inline">\(k=2\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<section id="modelos-de-2-categorías" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="modelos-de-2-categorías">Modelos de 2 categorías</h5>
<p>Ambos modelos cluster (tanto el de datos completos como el de datos recortados) separan perfectamente a las mujeres, y se equivocan con un pequeño porcentaje de los hombres (<span class="math inline">\(6\%\)</span> en datos completos, <span class="math inline">\(7.3\%\)</span> en datos recortados):</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos completos</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  data_lab<span class="sc">$</span>Sex,</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  data_km2<span class="sc">$</span>cluster</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        
          1  2
  Female  0 50
  Male   47  3</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos recortados</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_lab<span class="sc">$</span>Sex,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_km2<span class="sc">$</span>cluster</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        
          1  2
  Female 44  0
  Male    3 38</code></pre>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  data_km2, </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># main = "k=2 grupos",</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">'Modelo con K=2 grupos'</span>,</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Conjunto de datos completo (con outliers)'</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State,</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>Sex,</span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"darkgreen"</span>, <span class="st">'darkred'</span>)[data_lab<span class="sc">$</span>Sex])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo con datos completos separa hombres y mujeres, sobreajustándose por los outliers detectados. Comete errores en la clasificación de tres observaciones de hombres, con valores anormalmente bajos de los indicadores relacionados con el alcohol.</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos completos</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_km2, </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_std,</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># main = "k=2 grupos",</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">'Modelo con K=2 grupos'</span>,</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Conjunto de datos recortado (sin outliers)'</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>State,</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>Sex,</span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"darkred"</span>, <span class="st">'darkblue'</span>)[data_inliers_lab<span class="sc">$</span>Sex])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo con datos recortados separa hombres y mujeres, sin el sobreajuste impuesto por los outliers. Comete errores en la clasificación de tres observaciones de hombres, con valores anormalmente bajos de los indicadores relacionados con el alcohol.</p>
<p>Para ver el nivel de acuerdo de la agrupación con la clasificación, utilizamos el índice de Rand</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos completos</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>rand2 <span class="ot">&lt;-</span> fpc<span class="sc">::</span><span class="fu">cluster.stats</span>(</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> data_dist,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alt.clustering =</span> <span class="fu">as.numeric</span>(data_lab<span class="sc">$</span>Sex),</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering =</span> <span class="fu">as.numeric</span>(data_km2<span class="sc">$</span>cluster))</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>rand2<span class="sc">$</span>corrected.rand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8824166</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos recortados</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>rand2_inliers <span class="ot">&lt;-</span> fpc<span class="sc">::</span><span class="fu">cluster.stats</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> data_inliers_dist,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alt.clustering =</span> <span class="fu">as.numeric</span>(data_inliers_lab<span class="sc">$</span>Sex),</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering =</span> <span class="fu">as.numeric</span>(data_inliers_km2<span class="sc">$</span>cluster))</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>rand2_inliers<span class="sc">$</span>corrected.rand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8621841</code></pre>
</div>
</div>
<p>Se observan unos valores elevados del estadístico de Rand, por lo que las observaciones incluidas en los clústeres son muy similares entre sí, tanto para los modelos de datos completos como para los de datos recortados.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="2 - Modelos con $k=3$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-32-contents" aria-controls="callout-32" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
2 - Modelos con <span class="math inline">\(k=3\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-32" class="callout-32-contents callout-collapse collapse">
<section id="modelos-de-3-categorías" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="modelos-de-3-categorías">Modelos de 3 categorías</h5>
<p>Ambos modelos cluster (tanto el de datos completos como el de datos recortados) separan mal los tres niveles de la variable <code>AgeAdjustedDeathRate_fct3</code>, con un importante número de discordancias entre lo esperado y lo observado:</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos completos</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  data_km3<span class="sc">$</span>cluster</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                  
                    1  2  3
  Mortalidad baja   1 33  0
  Mortalidad media  1 17 15
  Mortalidad alta   1  3 29</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos recortados</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3,</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_km3<span class="sc">$</span>cluster</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                  
                    1  2  3
  Mortalidad baja  29  0  0
  Mortalidad media 14  6  8
  Mortalidad alta   3 15 10</code></pre>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  data_km3, </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># main = "k=2 grupos",</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">'Modelo con K=3 grupos'</span>,</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Conjunto de datos completo (con outliers)'</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State,</span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3,</span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"darkred"</span>, <span class="st">'darkgreen'</span>, <span class="st">'darkblue'</span>)[data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo de datos completos identifica razonablemente bien a las observaciones con mortalidad alta, pero a costa de equivocarse mucho en las que tiene mortalidad media y baja..</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos completos</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  data_inliers_km3, </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  data_inliers_std,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">'Modelo con K=3 grupos'</span>,</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Conjunto de datos recortado (sin outliers)'</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>State,</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>      data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3,</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(<span class="st">"darkred"</span>, <span class="st">'darkgreen'</span>, <span class="st">'darkblue'</span>)[data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo con datos recortados no está separando adecuadamente los niveles de la variable <code>AgeAdjustedDeathRate_fct3</code>. La información separada en los clústeres tiene poco que ver con los niveles de esta variable categórica.</p>
<p>Para ver el nivel de acuerdo de la agrupación con la clasificación, utilizamos el índice de Rand</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos completos</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>rand3 <span class="ot">&lt;-</span> fpc<span class="sc">::</span><span class="fu">cluster.stats</span>(</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> data_dist,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alt.clustering =</span> <span class="fu">as.numeric</span>(data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3),</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering =</span> <span class="fu">as.numeric</span>(data_km3<span class="sc">$</span>cluster))</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>rand3<span class="sc">$</span>corrected.rand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3448016</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos recortados</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>rand3_inliers <span class="ot">&lt;-</span> fpc<span class="sc">::</span><span class="fu">cluster.stats</span>(</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> data_inliers_dist,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alt.clustering =</span> <span class="fu">as.numeric</span>(data_inliers_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct3),</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering =</span> <span class="fu">as.numeric</span>(data_inliers_km3<span class="sc">$</span>cluster))</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>rand3_inliers<span class="sc">$</span>corrected.rand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2884544</code></pre>
</div>
</div>
<p>Se observan unos valores pobres del estadístico de Rand, por lo que las observaciones incluidas en los clústeres son muy distintas entre sí, tanto para los modelos de datos completos como para los de datos recortados. Los modelos no están separando la información contenida en la variable <code>AgeAdjustedDeathRate_fct3</code>.</p>
</section>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled" title="3 - Modelo con $k=4$">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-33-contents" aria-controls="callout-33" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
3 - Modelo con <span class="math inline">\(k=4\)</span>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-33" class="callout-33-contents callout-collapse collapse">
<section id="modelo-de-4-categorías" class="level5 callout-body-container callout-body">
<h5 class="anchored" data-anchor-id="modelo-de-4-categorías">Modelo de 4 categorías</h5>
<p>Ambos modelos cluster (tanto el de datos completos como el de datos recortados) separan mal los tres niveles de la variable <code>AgeAdjustedDeathRate_fct3</code>, con un importante número de discordancias entre lo esperado y lo observado:</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo de datos completos</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct4,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  data_km4<span class="sc">$</span>cluster</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                     
                       1  2  3  4
  Mortalidad muy baja 20  0  5  0
  Mortalidad baja     10  5  9  1
  Mortalidad alta      3 18  3  1
  Mortalidad muy alta  1 21  2  1</code></pre>
</div>
</div>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>factoextra<span class="sc">::</span><span class="fu">fviz_cluster</span>(</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  data_km4, </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  data_std,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">labelsize =</span> <span class="dv">5</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">'Modelo con K=4 grupos'</span>,</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">'Conjunto de datos completo (con outliers)'</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>State,</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>      data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct4,</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span>,</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="fu">c</span>(</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">"darkred"</span>, </span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">'darkgreen'</span>, </span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">'darkblue'</span>, </span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">'darkviolet'</span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>      )[data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct4])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_resultados_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El modelo de datos completos para <span class="math inline">\(k=4\)</span> no identifica correctamente los niveles de la variable <code>AgeAdjustedDeathRate_fct4</code>.</p>
<p>Para ver el nivel de acuerdo de la agrupación con la clasificación, utilizamos el índice de Rand</p>
<div class="cell" data-info="false">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos completos</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>rand4 <span class="ot">&lt;-</span> fpc<span class="sc">::</span><span class="fu">cluster.stats</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> data_dist,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alt.clustering =</span> <span class="fu">as.numeric</span>(data_lab<span class="sc">$</span>AgeAdjustedDeathRate_fct4),</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clustering =</span> <span class="fu">as.numeric</span>(data_km4<span class="sc">$</span>cluster))</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>rand4<span class="sc">$</span>corrected.rand</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2453907</code></pre>
</div>
</div>
<p>Se observa un valor bajo del estadístico de Rand, por lo que las observaciones incluidas en los clústeres son muy distintas entre sí. El modelo no están separando la información contenida en la variable <code>AgeAdjustedDeathRate_fct4</code>.</p>
</section>
</div>
</div>
</section>
</section>
<section id="fk---resumen-de-resultados-obtenidos" class="level3">
<h3 class="anchored" data-anchor-id="fk---resumen-de-resultados-obtenidos">05fk - Resumen de resultados obtenidos</h3>
<ul>
<li>En ambos supuestos (datos totales y recortados), se observó una tendencia a la agrupación, tanto estadísticamente (Hopkins <span class="math inline">\(&lt;0.5\)</span>), por lo que se justifica realizar un análisis de agrupación.</li>
<li>Para nuestro caso se utilizó un análisis cluster no jerárquico. En la fase de análisis exploratorio se detectó la presencia de <em>outliers</em>, por lo que se replicó el análisis con o sin los datos, para valorar la influencia de los mismos.</li>
<li>Se determinó que el número óptimo de clústeres se encontraba entre 2 y 4, para el conjunto de datos completo, y entre 2 y 3, para el modelo recortado sin <em>outliers</em>.</li>
<li>Se crearon cinco modelos de agrupación, utilizando el método <span class="math inline">\(k\)</span>-means, 3 para los datos completos, y 2 para los datos recortados, para los valores óptimos de cluster identificados.</li>
<li>Respecto a la importancia de las variables para establecer la agrupación:
<ul>
<li>En los modelos de 2 y 3 clústeres para datos completos, fueron las relacionadas con las características de las borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</li>
<li>Para el modelo con 4 clústeres, fue la de grandes bebedores (<code>HeavyDrinkingAdults</code>), seguida de las tres variables relacionadas con borracheras (<code>BingeDrinkingIntensityAdults</code>, <code>BingeDrinkingPrevalenceAdults</code>, <code>BingeDrinkingFrecuencyAdults</code>)</li>
</ul></li>
<li>Visualmente, los clústeres de los modelos son capaces de agrupar los datos sin solapamientos. El modelo de <span class="math inline">\(k=4\)</span> presenta solapamientos en la representación en 2-D, pero evidencia buena capacidad discriminatoria en los modelos 3-D.</li>
<li>Respecto a la evaluación de la validez de los modelos:
<ul>
<li>En lo que concierne a la validez interna, los modelos con mejor resultado han sido los <span class="math inline">\(K=2\)</span> y <span class="math inline">\(K=3\)</span> para datos recortados.</li>
<li>En lo tocante a validación externa:
<ul>
<li>Los dos modelos <span class="math inline">\(k=2\)</span>, tanto para datos completos como recortados, se ajustan bastante bien a los niveles de la variable <code>Sex</code>, por lo que capturan una información similar a esta variable.</li>
<li>Los modelos <span class="math inline">\(k=3\)</span> y <span class="math inline">\(k=4\)</span> se relacionan mal con la variable instrumental creada discretizando los valores de la variable <code>AgeAdjustedDeathRate</code>, con lo que es razonable suponer que capturan información no contenida en estas variable.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="salidas-del-subproceso" class="level2">
<h2 class="anchored" data-anchor-id="salidas-del-subproceso">Salidas del subproceso</h2>
<p>Se incorporaron los resultados de los modelos a los respectivos datasets, y se crearon dos nuevos objetos con la información del cluster:</p>
<ul>
<li><code>data_cluster</code>, incorporando los modelos <span class="math inline">\(k=2\)</span>, <span class="math inline">\(k=3\)</span> y <span class="math inline">\(k=4\)</span> a los datos completos, y</li>
<li><code>data_inliers_cluster</code>, incorporando los modelos <span class="math inline">\(k=2\)</span> y <span class="math inline">\(k=3\)</span> a los datos recortados</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Añadimos la clasificación cluster a los datos de trabajo</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>cluster2 <span class="ot">&lt;-</span> data_km2<span class="sc">$</span>cluster</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>cluster3 <span class="ot">&lt;-</span> data_km3<span class="sc">$</span>cluster</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>data_lab<span class="sc">$</span>cluster4 <span class="ot">&lt;-</span> data_km4<span class="sc">$</span>cluster</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Añadimos la clasificación cluster a los datos de trabajo (recortados)</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>data_inliers_lab<span class="sc">$</span>cluster2 <span class="ot">&lt;-</span> data_inliers_km2<span class="sc">$</span>cluster</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>data_inliers_lab<span class="sc">$</span>cluster3 <span class="ot">&lt;-</span> data_inliers_km3<span class="sc">$</span>cluster</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Grabamos los nuevos dtos</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>  data_lab,</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'lab'</span>, <span class="st">'data_cluster.rds'</span>)</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>  data_inliers_lab,</span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'lab'</span>, <span class="st">'data_inliers_cluster.rds'</span>)</span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../notebooks/05f_analysis.html" class="pagination-link" aria-label="Subproceso 05f - Análisis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Subproceso 05f - Análisis</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../notebooks/07_discusion.html" class="pagination-link" aria-label="Discusión">
        <span class="nav-page-text">Discusión</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>